---
import { getTeaserData } from "../data";
import Badge from "./Badge.astro";

interface Props {
    name: string;
    hidden?: boolean;
}

const { name, hidden = false } = Astro.props;

const data = await getTeaserData(name);
---

<a
    href={`smell/${data.name}`}
    class:list={[
        { hidden },
        "relative block overflow-hidden rounded border border-gray-100 p-4 sm:p-6 lg:p-8 hover:outline hover:outline-offset-2 hover:outline-2 outline-indigo-600"
    ]}
    data-name={name}
>
    <div class="sm:flex sm:justify-between sm:gap-4">
        <div>
            <h3 class="text-lg font-bold text-gray-900 sm:text-xl">
                <span class="mr-2">{data.name}</span>
                <Badge type={data.type} />
            </h3>
        </div>
    </div>

    <div class="mt-4">
        <p class="max-w-[40ch] text-sm text-gray-500">
            {data.description}
        </p>
    </div>

    <dl class="mt-6 flex gap-4 sm:gap-6">
        <div class="flex flex-col-reverse">
            <dt class="text-sm font-medium text-gray-600">{data.downloads.toLocaleString()}</dt>
            <dd class="text-xs text-gray-500">Weekly Downloads</dd>
        </div>

        <div class="flex flex-col-reverse">
            <dt class="text-sm font-medium text-gray-600">{data.dependencies}</dt>
            <dd class="text-xs text-gray-500">Dependencies</dd>
        </div>
    </dl>
</a>
