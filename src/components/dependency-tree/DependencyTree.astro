---
import { getEntry } from "astro:content";
import Tree from "./Tree.astro";

interface Props {
    pkg: string;
}
const { pkg } = Astro.props;

const npmData = await getEntry("npmData", pkg);

if (!npmData) {
    throw new Error(`No npmData found for ${pkg}`);
}

const { tree: dependencyTree } = npmData.data;
---

{
    dependencyTree.dependencies.length > 0 && (
        <section>
            <div class="gradient prose dark:prose-invert mx-auto max-w-(--breakpoint-xl) max-w-none rounded">
                <h3>Dependency Tree</h3>
                <ul class="bg-background rounded p-2">
                    <Tree node={dependencyTree} />
                </ul>
            </div>
        </section>
    )
}
